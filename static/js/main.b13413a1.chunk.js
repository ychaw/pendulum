(this.webpackJsonppendulum=this.webpackJsonppendulum||[]).push([[0],{221:function(e,t,a){},222:function(e,t,a){},364:function(e,t,a){"use strict";a.r(t);var i=a(0),s=a.n(i),n=a(21),o=(a(221),a(23)),r=a(17),l=a(30),d=a(31),u=a(204),h=a(398),c=a(402),p=(a(222),1e-32),m=1e3,v="lp",f="hp",g="bp",b="notch",j=function(){function e(){Object(o.a)(this,e),this.visualsOrder=void 0,this.pvMemorySettings=void 0,this.pvPendulumSettings=void 0,this.oscillator=void 0,this.envelope=void 0,this.filter=void 0,this.volume=void 0,this.visualsOrder={Oscillator:"FocusCard",Envelope:"DetailTopCard",Filter:"DetailCenterCard",Volume:"DetailBottomCard"},this.pvMemorySettings={drawMode:"fadingLine",maxMem:400,fadingStart:150,strokeWeight:1,drawColor:[200,200,200]},this.pvPendulumSettings={drawColor:[255,255,255],legWeight:4,ankleWidth:10},this.oscillator={name:"Oscillator",thetaFirstLeg:{step:.01,min:0,max:Math.round(2*Math.PI*100)/100,default:Math.round(Math.random()*Math.PI*2*100)/100},thetaSecondLeg:{step:.01,min:0,max:Math.round(2*Math.PI*100)/100,default:Math.round(Math.random()*Math.PI*2*100)/100},lengthFirstLeg:{min:10,max:160,default:160},lengthSecondLeg:{min:10,max:160,default:160},massFirstAnkle:{min:1,max:40,default:10},massSecondAnkle:{min:1,max:40,default:10},gravitation:{step:.1,min:.1,max:2,default:.8}},this.envelope={name:"Envelope",a:{min:5,max:2e3,default:400},d:{min:5,max:2e3,default:500},s:{min:5,max:m,default:600},r:{min:5,max:2e3,default:300}},this.filter={name:"Filter",type:{options:[v,f,g,b],default:v},frequency:{min:20,max:2e4,default:200},resonance:{min:p,max:m,default:100}},this.volume={name:"Volume",volume:{min:p,max:m,default:p,step:10,valueLabelFormat:function(e){return e===p?0:e/10}}}}return Object(r.a)(e,[{key:"getDoublePendulumPresets",value:function(){return{theta:[this.oscillator.thetaFirstLeg.default,this.oscillator.thetaSecondLeg.default],l:[this.oscillator.lengthFirstLeg.default,this.oscillator.lengthSecondLeg.default],m:[this.oscillator.massFirstAnkle.default,this.oscillator.massSecondAnkle.default],g:this.oscillator.gravitation.default}}},{key:"getComponentByName",value:function(e){return e===this.oscillator.name?this.oscillator:e===this.envelope.name?this.envelope:e===this.filter.name?this.filter:e===this.volume.name?this.volume:void 0}},{key:"getComponentNames",value:function(){return[this.oscillator.name,this.envelope.name,this.filter.name,this.volume.name]}}]),e}(),x=a(67),y=a(182),O=a.n(y),C=new j,S=function(){function e(t){var a=this;Object(o.a)(this,e),this.audioContext=void 0,this.audioNodes=void 0,this.envelope=void 0,this.envelopeTimerID=void 0,this.oscillatorTimerID=void 0,this.pendulum=void 0,this.pendulumBuffer=void 0,this.fft=void 0,this.activeNotes=void 0,this.hasMIDI=void 0,this.updateOscillator=function(){window.clearTimeout(a.oscillatorTimerID);0===a.audioNodes.oscillator.nextTableIndex?(a.audioNodes.oscillator.gainNodes[0].gain.linearRampToValueAtTime(1,a.audioContext.currentTime+a.audioNodes.oscillator.morphDuration/1e3/1),a.audioNodes.oscillator.gainNodes[1].gain.linearRampToValueAtTime(p,a.audioContext.currentTime+a.audioNodes.oscillator.morphDuration/1e3/1)):1===a.audioNodes.oscillator.nextTableIndex&&(a.audioNodes.oscillator.gainNodes[0].gain.linearRampToValueAtTime(p,a.audioContext.currentTime+a.audioNodes.oscillator.morphDuration/1e3/1),a.audioNodes.oscillator.gainNodes[1].gain.linearRampToValueAtTime(1,a.audioContext.currentTime+a.audioNodes.oscillator.morphDuration/1e3/1)),a.oscillatorTimerID=window.setTimeout(a.updateOscillator,a.audioNodes.oscillator.morphDuration),a.setOscillatorWave()},this.audioContext=new AudioContext,this.audioNodes={oscillator:{oscillators:[this.audioContext.createOscillator(),this.audioContext.createOscillator()],gainNodes:[this.audioContext.createGain(),this.audioContext.createGain()],morphStage:0,morphDuration:2e3,nextTableIndex:1},filter:this.audioContext.createBiquadFilter(),gain:this.audioContext.createGain(),master:this.audioContext.createGain()},this.envelope={a:C.envelope.a.default/1e3,d:C.envelope.d.default/1e3,s:C.envelope.s.default/m,r:C.envelope.r.default/1e3,stage:0,timings:[this.audioContext.currentTime,this.audioContext.currentTime,this.audioContext.currentTime]},this.pendulum=t,this.pendulumBuffer=new Float64Array(1024),this.fft=new O.a(this.pendulumBuffer.length),this.setOscillatorWave(),this.audioNodes.oscillator.oscillators[0].frequency.value=110,this.audioNodes.oscillator.oscillators[1].frequency.value=110,this.initSmoothTransitions(),this.connectNodes(),this.oscillatorTimerID=window.setTimeout(this.updateOscillator,10),this.activeNotes=[],this.hasMIDI=!1,console.log("constructed audio graph"),this.setupMidi()}return Object(r.a)(e,[{key:"connectNodes",value:function(){for(var e=this.audioNodes,t=e.filter,a=e.gain,i=e.master,s=this.audioNodes.oscillator,n=0;n<s.oscillators.length;n++)s.oscillators[n].connect(s.gainNodes[n]),s.gainNodes[n].connect(t);t.connect(a),a.connect(i),i.connect(this.audioContext.destination),s.oscillators.forEach((function(e){return e.start()}))}},{key:"initSmoothTransitions",value:function(){this.audioNodes.master.gain.exponentialRampToValueAtTime(C.volume.volume.default,this.audioContext.currentTime),this.audioNodes.gain.gain.exponentialRampToValueAtTime(p,this.audioContext.currentTime),this.audioNodes.filter.frequency.exponentialRampToValueAtTime(C.filter.frequency.default,this.audioContext.currentTime),this.audioNodes.oscillator.gainNodes[0].gain.linearRampToValueAtTime(1,this.audioContext.currentTime),this.audioNodes.oscillator.gainNodes[1].gain.linearRampToValueAtTime(p,this.audioContext.currentTime)}},{key:"setEnvelope",value:function(e){switch(e.identifier){case"a":this.envelope.a=e.value/1e3;break;case"d":this.envelope.d=e.value/1e3;break;case"s":this.envelope.s=e.value/m;break;case"r":this.envelope.r=e.value/1e3}}},{key:"setFilter",value:function(e){switch(e.identifier){case"type":if([v,f,g,b].includes(e.value))switch(e.value){case v:this.audioNodes.filter.type="lowpass";break;case f:this.audioNodes.filter.type="highpass";break;case g:this.audioNodes.filter.type="bandpass";break;case b:this.audioNodes.filter.type="notch"}break;case"frequency":this.audioNodes.filter.frequency.exponentialRampToValueAtTime(e.value,this.audioContext.currentTime+.3);break;case"resonance":this.audioNodes.filter.Q.exponentialRampToValueAtTime(e.value,this.audioContext.currentTime+.3)}}},{key:"setMasterGain",value:function(e){var t=this.keepValuePositive(e/m);this.audioNodes.master.gain.exponentialRampToValueAtTime(t,this.audioContext.currentTime+.3)}},{key:"keepValuePositive",value:function(e){return e<p&&(e=p),e}},{key:"fillBuffer",value:function(e,t){for(var a,i=t.getPendulumState(),s=Object(x.a)(Object(x.a)({},i),{},{theta:Array.from(i.theta),dTheta:Array.from(i.dTheta),ddTheta:Array.from(i.ddTheta)}),n=Array(e.length).fill(1),o=0;o<e.length;o++)n[o]=(a=o-e.length/2,Math.abs(a)<=e.length/4?1-6*Math.pow(a/(e.length/2),2)*(1-Math.abs(a)/(e.length/2)):2*Math.pow(1-Math.abs(a)/(e.length/2),3));for(var r=0;r<e.length;r+=4){var l=s.l[0]*Math.sin(s.theta[0]);e[r]=(l+s.l[1]*Math.sin(s.theta[1]))*n[r],s=t.advanceState(s)}}},{key:"setOscillatorWave",value:function(){this.fillBuffer(this.pendulumBuffer,this.pendulum);var e=this.fft.createComplexArray();this.fft.realTransform(e,this.pendulumBuffer);for(var t=new Float32Array(this.pendulumBuffer.length),a=new Float32Array(this.pendulumBuffer.length),i=0;i<t.length;i++)t[i]=e[2*i],a[i]=e[1+2*i];var s=this.audioContext.createPeriodicWave(t,a);this.audioNodes.oscillator.oscillators[this.audioNodes.oscillator.nextTableIndex].setPeriodicWave(s),this.audioNodes.oscillator.nextTableIndex=(this.audioNodes.oscillator.nextTableIndex+1)%this.audioNodes.oscillator.oscillators.length}},{key:"getFilterSpectrum",value:function(e){for(var t=new Float32Array(e),a=new Float32Array(e),i=new Float32Array(e),s=2e4/e,n=0;n<e;n++)t[n]=n*s;return this.audioNodes.filter.getFrequencyResponse(t,a,i),a}},{key:"setupMidi",value:function(){var e=this,t=function(e){switch(240&e.data[0]){case 128:return void s(e.data[1]);case 144:if(0!==e.data[2])return void i(e.data[1])}},a=function(e){return 440*Math.pow(2,(e-69)/12)},i=function(t){e.activeNotes.push(t),e.audioNodes.oscillator.oscillators.forEach((function(e){e.frequency.cancelScheduledValues(0),e.frequency.setTargetAtTime(a(t),0,.001)})),e.audioNodes.gain.gain.cancelScheduledValues(0),e.audioNodes.gain.gain.setTargetAtTime(1,0,e.envelope.a),e.audioNodes.gain.gain.setTargetAtTime(e.envelope.s,e.envelope.a,e.envelope.d)},s=function(t){var i=e.activeNotes.indexOf(t);-1!==i&&e.activeNotes.splice(i,1),0===e.activeNotes.length?(e.audioNodes.gain.gain.cancelScheduledValues(0),e.audioNodes.gain.gain.setTargetAtTime(0,0,e.envelope.r)):e.audioNodes.oscillator.oscillators.forEach((function(t){t.frequency.cancelScheduledValues(0),t.frequency.setTargetAtTime(a(e.activeNotes[e.activeNotes.length-1]),0,.001)}))};console.log("Trying to access MIDI devices..."),navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then((function(a){for(var i=!1,s=a.inputs.values(),n=s.next();n&&!n.done;n=s.next())n.value.onmidimessage=t,i=!0,e.hasMIDI=i;i?console.log("Connected to MIDI device"):console.log("No MIDI device found")}),(function(t){e.audioNodes.gain.gain.cancelScheduledValues(0),e.audioNodes.gain.gain.setTargetAtTime(1,0,1),alert("MIDI system failed to start.")}))}}]),e}(),N=function(){function e(t){Object(o.a)(this,e),this.x=void 0,this.y=void 0,this.theta=void 0,this.dTheta=void 0,this.ddTheta=void 0,this.l=void 0,this.m=void 0,this.g=void 0,this.mem=void 0;var a={theta:[Math.PI/4,Math.PI/4],l:[120,70],m:[10,10],g:1},i=Object(x.a)(Object(x.a)({},a),t);this.x=[0,0],this.y=[0,0],this.theta=i.theta,this.dTheta=[0,0],this.ddTheta=[0,0],this.l=i.l,this.m=i.m,this.g=i.g,this.mem={massSum:0,biasedMassSum:0,angleDifference:0,doubleSineAngleDiff:0,cosAngleDiff:0,denFactor:0,velSquaredTimesL:[0,0]}}return Object(r.a)(e,[{key:"resetPhysics",value:function(){0!==this.ddTheta[0]&&(this.mem.massSum=0,this.mem.biasedMassSum=0,this.mem.angleDifference=0,this.mem.doubleSineAngleDiff=0,this.mem.cosAngleDiff=0,this.mem.denFactor=0,this.mem.velSquaredTimesL=[0,0],this.dTheta=[0,0],this.ddTheta=[0,0])}},{key:"setValue",value:function(e,t){switch(e){case"thetaFirstLeg":this.theta[0]=t,this.resetPhysics();break;case"thetaSecondLeg":this.theta[1]=t,this.resetPhysics();break;case"lengthFirstLeg":this.l[0]=t;break;case"lengthSecondLeg":this.l[1]=t;break;case"massFirstAnkle":this.m[0]=t;break;case"massSecondAnkle":this.m[1]=t;break;case"gravitation":this.g=t}}},{key:"recalcPositions",value:function(){var e=Math.sin,t=Math.cos,a=this.x,i=this.y,s=this.theta,n=this.l;a[0]=n[0]*e(s[0]),i[0]=n[0]*t(s[0]),a[1]=a[0]+n[1]*e(s[1]),i[1]=i[0]+n[1]*t(s[1])}},{key:"tick",value:function(){var e=this.advanceState(this.getPendulumState());this.theta=e.theta,this.dTheta=e.dTheta,this.ddTheta=e.ddTheta,this.l=e.l,this.m=e.m,this.g=e.g,this.recalcPositions()}},{key:"advanceState",value:function(e){var t=Object(x.a)({},e),a=Math.sin,i=Math.cos,s=t.theta,n=t.dTheta,o=t.ddTheta,r=t.l,l=t.m,d=t.g,u=this.mem;u.massSum=l[0]+l[1],u.biasedMassSum=2*l[0]+l[1],u.angleDifference=s[0]-s[1],u.doubleSineAngleDiff=2*a(u.angleDifference),u.cosAngleDiff=i(u.angleDifference),u.denFactor=u.biasedMassSum-l[1]*i(2*u.angleDifference),u.velSquaredTimesL=[n[0]*n[0]*r[0],n[1]*n[1]*r[1]];var h=u.massSum,c=u.biasedMassSum,p=u.doubleSineAngleDiff,m=u.cosAngleDiff,v=u.denFactor,f=u.velSquaredTimesL,g=[0,0,0,0],b=[r[0]*v,r[1]*v];g[0]=-d*c*a(s[0]),g[1]=-l[1]*d*a(s[0]-2*s[1]),g[2]=-p*l[1],g[3]=f[1]+f[0]*m,o[0]=(g[0]+g[1]+g[2]*g[3])/b[0],g[0]=p,g[1]=f[0]*h,g[2]=d*h*i(s[0]),g[3]=f[1]*l[1]*m,o[1]=g[0]*(g[1]+g[2]+g[3])/b[1];for(var j=0;j<2;j++)n[j]+=o[j],s[j]+=n[j],s[j]%=2*Math.PI,s[j]<0&&(s[j]+=2*Math.PI);return(n[0]>=.4||n[0]<=-.4)&&(n[0]*=.5,n[1]=0,o[0]*=.2,o[1]*=.8),t}},{key:"getPendulumState",value:function(){return{theta:this.theta,dTheta:this.dTheta,ddTheta:this.ddTheta,l:this.l,m:this.m,g:this.g}}},{key:"resetPendulumState",value:function(e){this.theta=e.theta,this.dTheta=e.dTheta,this.ddTheta=e.ddTheta,this.l=e.l,this.m=e.m,this.g=e.g,this.recalcPositions()}}]),e}(),T=a(4),k=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.highlighted!==e.highlighted||this.props.doublePendulumVisualization!==e.doublePendulumVisualization||this.props.envelopeVisualization!==e.envelopeVisualization||this.props.filterVisualization!==e.filterVisualization||this.props.volumeVisualization!==e.volumeVisualization}},{key:"render",value:function(){return Object(T.jsxs)("div",{className:"Visualizations",children:[Object(T.jsx)("div",{className:"FocusCard",id:this.props.highlighted,children:this.props.doublePendulumVisualization}),Object(T.jsx)("div",{className:"DetailTopCard",id:this.props.highlighted,children:this.props.envelopeVisualization}),Object(T.jsx)("div",{className:"DetailCenterCard",id:this.props.highlighted,children:this.props.filterVisualization}),Object(T.jsx)("div",{className:"DetailBottomCard",id:this.props.highlighted,children:this.props.volumeVisualization})]})}}]),a}(s.a.Component),V=a(403),M=a(399),D=a(401),P=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).state={theta1Value:e.theta1Value,theta2Value:e.theta2Value},i}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.theta1Value!==this.props.theta1Value&&e.theta2Value!==this.props.theta2Value&&this.setState({theta1Value:e.theta1Value,theta2Value:e.theta2Value}),!0}},{key:"changeValue",value:function(e,t){e.startsWith("thetaFirst")?this.setState({theta1Value:t}):e.startsWith("thetaSecond")&&this.setState({theta2Value:t}),this.props.handleSliderChange(e,t)}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.preset);t.shift();for(var a=t.pop(),i=[],s=function(a){var s=t.slice(a,a+2),n=[e.props.preset[s[0]],e.props.preset[s[1]]];i.push(Object(T.jsxs)("div",{className:"SettingsContentParameter",children:[Object(T.jsx)("h3",{className:"Oscillator",children:s[0].split(/(?=[A-Z])/)[0]}),Object(T.jsx)(V.a,{className:"ParameterSlider",id:"first",value:s[0].startsWith("theta")?e.state.theta1Value:void 0,disabled:s[0].startsWith("theta")?e.props.disabledTheta:void 0,defaultValue:n[0].default,step:n[0].step,min:n[0].min,max:n[0].max,onChange:function(t,a){return e.changeValue(s[0],a)},valueLabelDisplay:"auto"}),Object(T.jsx)(V.a,{className:"ParameterSlider",id:"second",value:s[1].startsWith("theta")?e.state.theta2Value:void 0,disabled:s[1].startsWith("theta")?e.props.disabledTheta:void 0,defaultValue:n[1].default,step:n[1].step,min:n[1].min,max:n[1].max,onChange:function(t,a){return e.changeValue(s[1],a)},valueLabelDisplay:"auto"})]},a))},n=0;n<t.length;n+=2)s(n);var o=this.props.preset[a];return i.push(Object(T.jsxs)("div",{className:"SettingsContentParameter",children:[Object(T.jsx)("h3",{children:a}),Object(T.jsx)(V.a,{className:"ParameterSlider",defaultValue:o.default,step:o.step,min:o.min,max:o.max,onChange:function(t,i){return e.props.handleSliderChange(a,i)},valueLabelDisplay:"auto"})]},t.length)),Object(T.jsx)("div",{className:"SettingsContent",children:i})}}]),a}(s.a.Component),w=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.preset!==this.props.preset||e.handleSliderChange!==this.props.handleSliderChange||e.disabled!==this.props.disabled}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.preset);return t.shift(),Object(T.jsxs)("div",{className:"SettingsContent",children:[t.map((function(t,a){var i=e.props.preset[t];return Object(T.jsxs)("div",{className:"SettingsContentParameter",children:[Object(T.jsx)("h3",{className:"Envelope",children:t.toUpperCase()}),Object(T.jsx)(V.a,{className:"ParameterSlider",defaultValue:i.default,disabled:e.props.disabled,step:i.step,min:i.min,max:i.max,onChange:function(a,i){return e.props.handleSliderChange(t,i)},valueLabelDisplay:"auto"})]},a)}))," "]})}}]),a}(s.a.Component),F=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.preset!==this.props.preset||e.handleSliderChange!==this.props.handleSliderChange}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.preset);t.shift();var a=this.props.preset[t[0]],i=t[0];t.shift();var s=new Map([[v,"Low Pass"],[f,"High Pass"],[g,"Band Pass"],[b,"Notch"]]);return Object(T.jsxs)("div",{className:"SettingsContent",children:[Object(T.jsx)(M.a,{className:"SettingsContentParameter",defaultValue:a.default,onChange:function(t){return e.props.handleSliderChange(i,t.target.value)},children:a.options.map((function(e,t){return Object(T.jsx)(D.a,{value:e,children:s.get(e)},t)}))}),t.map((function(t,a){var i=e.props.preset[t];return Object(T.jsxs)("div",{className:"SettingsContentParameter",children:[Object(T.jsx)("h3",{children:t}),Object(T.jsx)(V.a,{className:"ParameterSlider",defaultValue:i.default,step:i.step,min:i.min,max:i.max,onChange:function(a,i){return e.props.handleSliderChange(t,i)},valueLabelDisplay:"auto"})]},a)}))]})}}]),a}(s.a.Component),A=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.preset!==this.props.preset||e.handleSliderChange!==this.props.handleSliderChange}},{key:"render",value:function(){var e=this,t=this.props.preset.volume;return Object(T.jsx)("div",{className:"SettingsContent",children:Object(T.jsx)("div",{className:"SettingsContentParameter",children:Object(T.jsx)(V.a,{className:"ParameterSlider",defaultValue:t.default,step:t.step,min:t.min,max:t.max,valueLabelFormat:t.valueLabelFormat,onChange:function(t,a){return e.props.handleSliderChange(e.props.preset.name,a)},valueLabelDisplay:"auto"})})})}}]),a}(s.a.Component),I=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.theta1Value!==this.props.theta1Value&&e.theta2Value!==this.props.theta2Value||e.diabledTheta!==this.props.disabledTheta||e.disabledEnvelope!==this.props.disabledEnvelope}},{key:"render",value:function(){var e=this.props;return Object(T.jsxs)("div",{className:"SettingsCards",children:[" ",e.classNames.map((function(t,a){var i=e.presets.getComponentByName(t);return Object(T.jsxs)("div",{className:"Settings"+t+"Card",onMouseEnter:function(){return e.setHighlight(t)},onMouseLeave:e.clearHighlight,children:[Object(T.jsx)("h2",{className:"SettingsHeader",children:t}),{Oscillator:Object(T.jsx)(P,{preset:i,handleSliderChange:e.sliderChanges[t],theta1Value:e.theta1Value,theta2Value:e.theta2Value,disabledTheta:e.disabledTheta}),Envelope:Object(T.jsx)(w,{preset:i,handleSliderChange:e.sliderChanges[t],disabled:e.disabledEnvelope}),Filter:Object(T.jsx)(F,{preset:i,handleSliderChange:e.sliderChanges[t]}),Volume:Object(T.jsx)(A,{preset:i,handleSliderChange:e.sliderChanges[t]})}[t]]},a)}))," "]})}}]),a}(s.a.Component),L=a(111),W=a.n(L);var E=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).mem=void 0,i.orgDim=void 0,i.dim=void 0,i.buffer=void 0,i.padding=void 0,i.paused=void 0,i.props=void 0,i.setup=function(e,t){i.dim=[t.clientWidth,t.clientHeight],i.orgDim=i.dim,e.createCanvas(i.dim[0],i.dim[1],"p2d").parent(t).doubleClicked((function(e){i.paused=!i.paused,i.mem=[],i.props.canvasDoubleClicked(i.paused)})),e.windowResized=function(){var t,a,s=null===(t=document.getElementsByClassName("FocusCard").item(0))||void 0===t?void 0:t.clientWidth,n=null===(a=document.getElementsByClassName("FocusCard").item(0))||void 0===a?void 0:a.clientHeight;s===i.dim[0]&&n===i.dim[1]||(i.dim=[s,n],e.resizeCanvas(i.dim[0],i.dim[1],!0),i.buffer.resizeCanvas(i.dim[0]-i.padding,i.dim[1]-i.padding,!0),i.buffer.translate(i.dim[0]/2,i.dim[1]/2))},i.buffer=e.createGraphics(i.dim[0]-i.padding,i.dim[1]-i.padding),i.buffer.translate(i.buffer.width/2,i.buffer.height/2),e.textFont("Consolas")},i.draw=function(e){e.clear(),e.translate(i.dim[0]/2,i.dim[1]/2);var t=i.props.dp.x[0],a=i.props.dp.y[0],s=i.props.dp.x[1],n=i.props.dp.y[1];if(!i.paused){var o=s,r=n;if(i.props.dp.tick(),t=i.props.dp.x[0],a=i.props.dp.y[0],s=i.props.dp.x[1],n=i.props.dp.y[1],"solidLine"===i.props.memorySettings.drawMode)e.image(i.buffer,-i.dim[0]/2+i.padding/2,-i.dim[1]/2+i.padding/2),i.buffer.stroke(i.props.memorySettings.drawColor),i.buffer.strokeWeight(i.props.memorySettings.strokeWeight),e.frameCount>1&&i.buffer.line(o,r,s,n);else if("dots"===i.props.memorySettings.drawMode||"fadingLine"===i.props.memorySettings.drawMode){i.mem.push([s,n])>i.props.memorySettings.maxMem&&i.mem.shift(),i.mem.forEach((function(t){var a,s,n,o,r=255;i.mem.indexOf(t)<=i.props.memorySettings.fadingStart&&(a=i.mem.indexOf(t),s=0,n=i.props.memorySettings.fadingStart,r=(o=0)+(255-o)*(a-s)/(n-s));var l=[i.props.memorySettings.drawColor[0],i.props.memorySettings.drawColor[1],i.props.memorySettings.drawColor[2],r];if("dots"===i.props.memorySettings.drawMode)e.fill(l),e.circle(t[0],t[1],2);else{var d=i.mem.indexOf(t)>0?i.mem[i.mem.indexOf(t)-1]:t;e.stroke(l),e.strokeWeight(i.props.memorySettings.strokeWeight),e.line(d[0],d[1],t[0],t[1])}}))}}e.noFill(),e.stroke(i.props.pendulumSettings.drawColor),e.strokeWeight(i.props.pendulumSettings.legWeight),e.line(0,0,t,a),e.line(t,a,s,n),e.fill(i.props.pendulumSettings.drawColor),e.noStroke(),e.circle(0,0,i.props.pendulumSettings.ankleWidth),e.circle(t,a,i.props.pendulumSettings.ankleWidth),e.circle(s,n,i.props.pendulumSettings.ankleWidth)},i.props=e,i.mem=[],i.orgDim=[],i.dim=[],i.padding=70,i.buffer=null,i.paused=!0,i}return Object(r.a)(a,[{key:"render",value:function(){return Object(T.jsx)(W.a,{setup:this.setup,draw:this.draw,className:"pendulum"})}}]),a}(s.a.Component),z=a(393),B=a(394),R=a(202),q=a(203),H=a(206),G=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.a!==e.a||this.props.d!==e.d||this.props.s!==e.s||this.props.r!==e.r}},{key:"render",value:function(){var e=this.props.a+this.props.d+100+this.props.r,t=[{x:0,y:0},{x:this.props.a,y:100},{x:this.props.a+this.props.d,y:this.props.s},{x:e-this.props.r,y:this.props.s},{x:e,y:0}];return Object(T.jsx)(z.a,{children:Object(T.jsxs)(B.a,{data:t,margin:{top:30,bottom:30,left:30,right:30},children:[Object(T.jsx)(R.a,{hide:!0,dataKey:"x",type:"number",domain:[0,t[4].x],tick:!1}),Object(T.jsx)(q.a,{hide:!0,type:"number",domain:[0,t[1].y],tick:!1}),Object(T.jsx)(H.a,{type:"monotone",dataKey:"y",stroke:"#2F80ED",strokeWidth:3,dot:!1,strokeLinecap:"round"})]})})}}]),a}(s.a.Component),U=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.spectrum!==e.spectrum}},{key:"render",value:function(){for(var e=[],t=this.props.spectrum.filter(Boolean),a=0;a<t.length;a++)e[a]={x:a,y:Math.log(t[a])};return Object(T.jsx)(z.a,{children:Object(T.jsxs)(B.a,{data:e,margin:{top:30,bottom:30,left:30,right:30},children:[Object(T.jsx)(R.a,{hide:!0,dataKey:"x",type:"number",tick:!1}),Object(T.jsx)(q.a,{hide:!0,type:"number",tick:!1}),Object(T.jsx)(H.a,{type:"monotone",dataKey:"y",stroke:"#2F80ED",strokeWidth:3,dot:!1,strokeLinecap:"round"})]})})}}]),a}(s.a.Component),K=a(37);function J(e,t,a,i,s){return i+(s-i)*(e-t)/(a-t)}var Q=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).orgDim=void 0,i.dim=void 0,i.history=void 0,i.xRange=void 0,i.padding=void 0,i.setup=function(e,t){i.dim=[t.clientWidth,t.clientHeight],i.orgDim=i.dim,e.createCanvas(i.dim[0],i.dim[1],"p2d").parent(t),e.frameRate(30),e.windowResized=function(){var t,a,s=null===(t=document.getElementsByClassName("DetailBottomCard").item(0))||void 0===t?void 0:t.clientWidth,n=null===(a=document.getElementsByClassName("DetailBottomCard").item(0))||void 0===a?void 0:a.clientHeight;s===i.dim[0]&&n===i.dim[1]||(i.dim=[s,n],e.resizeCanvas(i.dim[0],i.dim[1],!0))}},i.draw=function(e){e.clear(),e.translate(0,i.dim[1]/2),e.stroke("#2F80ED"),e.strokeWeight(3);var t=i.props.dp.x[1]*i.props.volume;(t=i.props.volume===p?0:t,i.props.paused)||i.history.push(t)>i.xRange&&i.history.shift();for(var a=Math.max(Math.max.apply(Math,Object(K.a)(i.history)),Math.abs(Math.min.apply(Math,Object(K.a)(i.history)))),s=(i.dim[0]-2*i.padding)/i.xRange,n=i.dim[1]/2,o=1;o<i.history.length;o++){var r=i.history.length>0?i.history[o-1]:i.history[o],l=i.history[o];r=J(r,-a,a,-n+i.padding,n-i.padding),l=J(l,-a,a,-n+i.padding,n-i.padding),r=isNaN(r)?0:r,l=isNaN(l)?0:l,e.line((o-1)*s+i.padding,r,o*s+i.padding,l)}},i.orgDim=[],i.dim=[],i.history=[],i.xRange=100,i.padding=30,i}return Object(r.a)(a,[{key:"render",value:function(){return Object(T.jsx)(W.a,{setup:this.setup,draw:this.draw,className:"volumeVisualization"})}}]),a}(s.a.Component),Y=Object(u.a)({palette:{type:"dark",primary:{main:"#2F80ED"}},typography:{fontFamily:"Raleway",fontSize:16}}),Z=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).doublePendulum=void 0,i.audioGraph=void 0,i.presets=void 0,i.componentNames=void 0,i.setHighlight=function(e){i.setState((function(t){return{highlighted:t.visualsOrder[e]}}))},i.clearHighlight=function(e){i.setState({highlighted:""})},i.canvasDoubleClicked=function(e){e?(i.audioGraph.audioContext.suspend(),i.setState({pendulumPaused:!0,theta1Value:Math.round(100*i.doublePendulum.theta[0])/100,theta2Value:Math.round(100*i.doublePendulum.theta[1])/100})):(i.audioGraph.audioContext.resume(),i.setState({pendulumPaused:!1}))},i.handleOscillatorChange=function(e,t){i.doublePendulum.setValue(e,t),(e.startsWith("theta")||e.startsWith("length"))&&i.doublePendulum.recalcPositions(),e.startsWith("theta")},i.handleEnvelopeChange=function(e,t){switch(i.audioGraph.setEnvelope({identifier:e,value:t}),e){case"a":i.setState({envelopeA:t/i.presets.envelope.a.max*100});break;case"d":i.setState({envelopeD:t/i.presets.envelope.d.max*100});break;case"s":i.setState({envelopeS:t/i.presets.envelope.s.max*100});break;case"r":i.setState({envelopeR:t/i.presets.envelope.r.max*100})}},i.handleFilterChange=function(e,t){i.audioGraph.setFilter({identifier:e,value:t}),i.setState({filterSpectrum:i.audioGraph.getFilterSpectrum(100)})},i.handleVolumeChange=function(e,t){i.audioGraph.setMasterGain(t),i.setState({volume:t})},i.handleModalClose=function(){i.setState({greeterOpen:!1,disabledEnvelope:!i.audioGraph.hasMIDI})},i.presets=new j,i.componentNames=i.presets.getComponentNames(),i.doublePendulum=new N(i.presets.getDoublePendulumPresets()),i.doublePendulum.recalcPositions(),i.audioGraph=new S(i.doublePendulum),i.state={visualsOrder:i.presets.visualsOrder,highlighted:"",theta1Value:i.presets.oscillator.thetaFirstLeg.default,theta2Value:i.presets.oscillator.thetaSecondLeg.default,pendulumPaused:!0,envelopeA:i.presets.envelope.a.default/i.presets.envelope.a.max*100,envelopeD:i.presets.envelope.d.default/i.presets.envelope.d.max*100,envelopeS:i.presets.envelope.s.default/i.presets.envelope.s.max*100,envelopeR:i.presets.envelope.r.default/i.presets.envelope.r.max*100,filterSpectrum:i.audioGraph.getFilterSpectrum(100),volume:i.presets.volume.volume.default,disabledEnvelope:!i.audioGraph.hasMIDI,greeterOpen:!0},i}return Object(r.a)(a,[{key:"render",value:function(){return Object(T.jsx)(h.a,{theme:Y,children:Object(T.jsxs)("div",{className:"App",children:[Object(T.jsxs)("div",{className:"HeaderCard",children:[Object(T.jsx)("h1",{className:"HeaderText",children:"Pendulum"}),Object(T.jsx)("h3",{className:"HeaderText",children:"Oscillator based on a double pendulum by Yannick Clausen & Henry Peters"})]}),Object(T.jsx)(c.a,{open:this.state.greeterOpen,onClose:this.handleModalClose,"aria-labelledby":"greeter","aria-describedby":"greeter explaining the application",children:Object(T.jsxs)("div",{className:"greeter",style:{color:"#FFFFFF"},children:[Object(T.jsx)("h2",{className:"HeaderText",children:"Welcome!"}),Object(T.jsx)("p",{className:"greeterText",style:{marginTop:"2em"},children:"This synthesizer will try to use the first MIDI device connected to your system as a controller. If it can not find one, it will play continously."}),Object(T.jsx)("p",{className:"greeterText",children:"Start the simulation by double-clicking the largest frame with the pendulum inside and increase the volume via the slider to the bottom right."}),Object(T.jsx)("p",{className:"greeterText",children:"We hope you will enjoy our work!"})]})}),Object(T.jsx)(k,{highlighted:this.state.highlighted,doublePendulumVisualization:Object(T.jsx)(E,{dp:this.doublePendulum,memorySettings:this.presets.pvMemorySettings,pendulumSettings:this.presets.pvPendulumSettings,canvasDoubleClicked:this.canvasDoubleClicked}),envelopeVisualization:Object(T.jsx)(G,{a:this.state.envelopeA,d:this.state.envelopeD,s:this.state.envelopeS,r:this.state.envelopeR}),filterVisualization:Object(T.jsx)(U,{spectrum:this.state.filterSpectrum}),volumeVisualization:Object(T.jsx)(Q,{dp:this.doublePendulum,paused:this.state.pendulumPaused,volume:this.state.volume})}),Object(T.jsx)(I,{classNames:this.componentNames,presets:this.presets,setHighlight:this.setHighlight,clearHighlight:this.clearHighlight,sliderChanges:{Oscillator:this.handleOscillatorChange,Envelope:this.handleEnvelopeChange,Filter:this.handleFilterChange,Volume:this.handleVolumeChange},theta1Value:this.state.theta1Value,theta2Value:this.state.theta2Value,disabledTheta:!this.state.pendulumPaused,disabledEnvelope:this.state.disabledEnvelope})]})})}}]),a}(s.a.Component),X=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,404)).then((function(t){var a=t.getCLS,i=t.getFID,s=t.getFCP,n=t.getLCP,o=t.getTTFB;a(e),i(e),s(e),n(e),o(e)}))};n.render(Object(T.jsx)(i.StrictMode,{children:Object(T.jsx)(Z,{})}),document.getElementById("root")),X()}},[[364,1,2]]]);
//# sourceMappingURL=main.b13413a1.chunk.js.map